# ๐ฒ OTP Login Service

ุณุณุชู ุงุญุฑุงุฒ ููุช ุณุงุฏู ุจุง OTP ู JWTุ ููุดุชูโุดุฏู ุจุง Go ู Gin.

---

## ๐ฆ ูฺฺฏโูุง

- ุฏุฑุงูุช OTP ุจุง ุดูุงุฑู ุชููู  
- ุงุนุชุจุงุฑุณูุฌ OTP ู ุตุฏูุฑ JWT  
- ุฐุฎุฑูโุณุงุฒ OTP ุจูโุตูุฑุช ูุญู (in-memory)  
- ุณุงุฎุชุงุฑ ูุงฺููุงุฑ ุจุง ููุฏูุฑูุง ู ูุงูโ ุฐุฎุฑูโุณุงุฒ  
- ุชุณุชโูพุฐุฑ ุจุง REST Client  
- ุงุฌุฑุง ูพุฑูฺู ุจุง Docker  

---

## ๐ ุงุฌุฑุง ูพุฑูฺู

```bash
docker build -t otp-login-service .
docker run -p 8080:8080 otp-login-service
```

---

## ๐งช ุชุณุชโูุง

ูุงูโูุง ุชุณุช ููุฌูุฏ:

- `test-request.http` โ ุฏุฑุงูุช OTP  
- `test-verify.http` โ ุงุนุชุจุงุฑุณูุฌ ูููู  
- `test-verify-invalid.http` โ ุงุนุชุจุงุฑุณูุฌ ูุงูููู  

> ูุงุจู ุงุฌุฑุง ุจุง REST Client ุง ุงุจุฒุงุฑูุง ูุดุงุจู ูุซู Thunder Client ุง Postman

---

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```plaintext
internal/
โโโ handlers/
โ   โโโ request_otp.go
โ   โโโ verify_otp.go
โ   โโโ users.go
โโโ storage/
โ   โโโ otp.go
cmd/
โโโ main.go
docs/
โโโ swagger.json
tests/
โโโ test-rate-limit.http
โโโ test-request.http
โโโ test-verify.http
โโโ test-verify-invalid.http
```

---

## ๐ฎ ูุณุฑูุง API

### `POST /auth/request-otp`

```json
{
  "phone": "09123456789"
}
```

ูพุงุณุฎ:

```json
{
  "message": "OTP ุงุฑุณุงู ุดุฏ (ุฏุฑ ฺฉูุณูู ฺุงูพ ุดุฏู)"
}
```

---

### `POST /auth/verify-otp`

```json
{
  "phone": "09123456789",
  "code": "ฺฉุฏ ฺฉู ุฏุฑ ฺฉูุณูู ฺุงูพ ุดุฏู"
}
```

ูพุงุณุฎ ูููู:

```json
{
  "message": "ูุฑูุฏ ูููู",
  "token": "..."
}
```

---

### `GET /users`

ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ:

- `page` โ ุดูุงุฑู ุตูุญู  
- `limit` โ ุชุนุฏุงุฏ ุฏุฑ ูุฑ ุตูุญู  
- `search` โ ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ุดูุงุฑู ุชููู  

---

### `GET /users/{phone}`

ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉ ฺฉุงุฑุจุฑ ุฎุงุต ุจุฑ ุงุณุงุณ ุดูุงุฑู ุชููู

---

## ๐ ูฺฉุงุช ุงููุช

- OTP ููุท ุจูโุตูุฑุช ูููุช ุฏุฑ ุญุงูุธู ูฺฏูโุฏุงุฑ ูโุดูุฏ  
- ฺฉูุฏ JWT ุจูโุตูุฑุช ุซุงุจุช ุฏุฑ ฺฉุฏ ุชุนุฑู ุดุฏู (`your-secret-key`)  
  โ ูพุดููุงุฏ ูโุดูุฏ ุงุฒ ูุงู `.env` ุฎูุงูุฏู ุดูุฏ  
- ุงู ูพุฑูฺู ุจุฑุง ุชุณุช ู ุขููุฒุด ุทุฑุงุญ ุดุฏู ู ุขูุงุฏูโ ุชูุณุนู ุจุฑุง ูุญุท ูุงูุน ุงุณุช

---

## ๐ ุชูุณุนูโูุง ูพุดููุงุฏ

- ุงุชุตุงู ุจู MongoDB ุง Redis ุจุฑุง ุฐุฎุฑูโุณุงุฒ ูพุงุฏุงุฑ  
- ุงุถุงูู ฺฉุฑุฏู middleware ุจุฑุง ุงุนุชุจุงุฑุณูุฌ JWT  
- ุณุงุฎุช ูุงูโ ฺฉุงุฑุจุฑุงู ู ููุดโูุง  
- ูุญุฏูุฏุณุงุฒ ุงุฑุณุงู OTP (rate limiting)  
- ุงุถุงูู ฺฉุฑุฏู Swagger UI ุจุฑุง ูุณุชูุฏุงุช API  
- ุชุณุชโูุง ูุงุญุฏ ุจุง `go test`
